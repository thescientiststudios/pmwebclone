{"version":3,"sources":["../../src/functions/onEnter.js"],"names":["onEnter","node","inTransition","entryTrigger","entryProps","exitProps","triggerResolve","pathname","preventScrollJump","hash","locationKey","delay","appearAfter","e","scrollTo","hashElement","document","getElementById","clientOffsetTop","offsetTop","window","position","storageKey","y","JSON","parse","sessionStorage","getItem","console","warn","trigger","removed","entryPropsTrimmed","timeout","visiblePromise","Promise","resolve","entry","visible","exit"],"mappings":";;;;;AAAA;;AAEA,MAAMA,OAAO,GAAG,CAAC;AAChBC,EAAAA,IADgB;AAEhBC,EAAAA,YAFgB;AAGhBC,EAAAA,YAHgB;AAIhBC,EAAAA,UAJgB;AAKhBC,EAAAA,SALgB;AAMhBC,EAAAA,cANgB;AAOhBC,EAAAA,QAPgB;AAQhBC,EAAAA,iBARgB;AAShBC,EAAAA,IATgB;AAUhBC,EAAAA,WAVgB;AAWhBN,EAAAA,UAAU,EAAE;AAAEO,IAAAA,KAAK,GAAG;AAAV,GAXI;AAYhBC,EAAAA,WAAW,GAAG,CAZE;AAahBC,EAAAA;AAbgB,CAAD,KAcV;AACL,MAAIX,YAAY,IAAI,CAACM,iBAArB,EAAwC;AACvC,gDAAW,MAAM;AAChB,UAAIM,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAf,CADgB,CAGhB;AACA;;AACA,UAAIL,IAAJ,EAAU;AACT,cAAMM,WAAW,GAAGC,QAAQ,CAACC,cAAT,CAAwBR,IAAxB,CAApB;;AAEA,YAAIM,WAAJ,EAAiB;AAChB,gBAAMG,eAAe,GAAGH,WAAW,CAACI,SAApC;AACAL,UAAAA,QAAQ,GAAG,CAAC,CAAD,EAAII,eAAJ,CAAX;AACA;AACD;;AAEDE,MAAAA,MAAM,CAACN,QAAP,CAAgB,GAAGA,QAAnB;AACA,KAfD,EAeGF,WAfH;AAgBA,GAjBD,MAiBO,IAAI,CAACV,YAAL,EAAmB;AACzB;AACA;AACA,QAAImB,QAAQ,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAf;;AACA,QAAI;AACH,YAAMC,UAAU,GAAI,YAAWf,QAAS,IAAGG,WAAY,EAAvD;AACA,YAAMa,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuBL,UAAvB,CAAX,KAAkD,CAA5D;AAEAD,MAAAA,QAAQ,GAAG,CAAC,CAAD,EAAIE,CAAJ,CAAX;AACA,KALD,CAKE,OAAOV,CAAP,EAAU;AACXe,MAAAA,OAAO,CAACC,IAAR,CACE,0GADF;AAGA,KATD,SASU;AACTT,MAAAA,MAAM,CAACN,QAAP,CAAgB,GAAGO,QAAnB;AACA;AACD;;AAED,MAAI,CAACnB,YAAL,EAAmB;AAEnB,QAAM;AAAE4B,IAAAA,OAAO,EAAEC,OAAX;AAAoB,OAAGC;AAAvB,MAA6C5B,UAAnD;AAEA,QAAM6B,OAAO,GAAGrB,WAAW,GAAGD,KAA9B;AAEA,QAAMuB,cAAc,GAAG,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC7C,gDAAW,MAAMA,OAAO,EAAxB,EAA4BH,OAA5B;AACA,GAFsB,CAAvB;AAIA3B,EAAAA,cAAc,CAAC+B,KAAf,CAAqB,EACpB,GAAGL,iBADiB;AAEpBM,IAAAA,OAAO,EAAEJ,cAFW;AAGpBjC,IAAAA;AAHoB,GAArB;AAMAE,EAAAA,YAAY,IACX,OAAOA,YAAP,KAAwB,UADzB,IAECA,YAAY,CAAC;AACZkC,IAAAA,KAAK,EAAEjC,UADK;AAEZmC,IAAAA,IAAI,EAAElC,SAFM;AAGZJ,IAAAA,IAHY;AAIZY,IAAAA;AAJY,GAAD,CAFb;AAQA,CA1ED","sourcesContent":["import { setTimeout } from 'requestanimationframe-timer'\n\nconst onEnter = ({\n\tnode,\n\tinTransition,\n\tentryTrigger,\n\tentryProps,\n\texitProps,\n\ttriggerResolve,\n\tpathname,\n\tpreventScrollJump,\n\thash,\n\tlocationKey,\n\tentryProps: { delay = 0 },\n\tappearAfter = 0,\n\te,\n}) => {\n\tif (inTransition && !preventScrollJump) {\n\t\tsetTimeout(() => {\n\t\t\tlet scrollTo = [0, 0]\n\n\t\t\t// handle hashes that link to ID's\n\t\t\t// for ex /page-2#heading-section\n\t\t\tif (hash) {\n\t\t\t\tconst hashElement = document.getElementById(hash)\n\n\t\t\t\tif (hashElement) {\n\t\t\t\t\tconst clientOffsetTop = hashElement.offsetTop\n\t\t\t\t\tscrollTo = [0, clientOffsetTop]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twindow.scrollTo(...scrollTo)\n\t\t}, appearAfter)\n\t} else if (!inTransition) {\n\t\t// If session storage fails due to cookies being disabled,\n\t\t// scroll to the top after every navigation\n\t\tlet position = [0, 0]\n\t\ttry {\n\t\t\tconst storageKey = `@@scroll|${pathname}|${locationKey}`\n\t\t\tconst y = JSON.parse(sessionStorage.getItem(storageKey)) || 0\n\n\t\t\tposition = [0, y]\n\t\t} catch (e) {\n\t\t\tconsole.warn(\n\t\t\t\t`[gatsby-plugin-transition-link] Unable to save state in sessionStorage; sessionStorage is not available.`\n\t\t\t)\n\t\t} finally {\n\t\t\twindow.scrollTo(...position)\n\t\t}\n\t}\n\n\tif (!inTransition) return\n\n\tconst { trigger: removed, ...entryPropsTrimmed } = entryProps\n\n\tconst timeout = appearAfter + delay\n\n\tconst visiblePromise = new Promise(resolve => {\n\t\tsetTimeout(() => resolve(), timeout)\n\t})\n\n\ttriggerResolve.entry({\n\t\t...entryPropsTrimmed,\n\t\tvisible: visiblePromise,\n\t\tnode,\n\t})\n\n\tentryTrigger &&\n\t\ttypeof entryTrigger === 'function' &&\n\t\tentryTrigger({\n\t\t\tentry: entryProps,\n\t\t\texit: exitProps,\n\t\t\tnode,\n\t\t\te,\n\t\t})\n}\n\nexport { onEnter }\n"],"file":"onEnter.js"}