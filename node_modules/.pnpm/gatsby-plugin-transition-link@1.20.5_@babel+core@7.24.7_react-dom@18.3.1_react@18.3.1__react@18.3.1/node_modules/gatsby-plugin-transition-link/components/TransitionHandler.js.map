{"version":3,"sources":["../../src/components/TransitionHandler.js"],"names":["DelayedTransition","Transition","TransitionHandler","Component","render","props","children","injectPageProps","exitDelay","exitLength","exitState","entryDelay","entryLength","entryState","entryTrigger","entryProps","exitTrigger","exitProps","inTransition","updateContext","triggerResolve","appearAfter","preventScrollJump","hash","e","location","action","pathname","key","locationKey","enter","exit","node","window","__tl_back_button_pressed","transitionStatus","mount","states","entry","state","delay","length","current","transitionState","exitZindex","zIndex","entryZindex"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Transition, TransitionGroup } from 'react-transition-group'\nimport { Location } from '@reach/router'\n\nimport TransitionRenderer from './TransitionRenderer'\nimport delayTransitionRender from './delayTransitionRender'\nimport { Consumer } from '../context/createTransitionContext'\nimport { onEnter } from '../functions/onEnter'\nimport { onExit } from '../functions/onExit'\nimport { getMs } from '../utils/secondsMs'\n\nimport '../style.css'\n\nconst DelayedTransition = delayTransitionRender(Transition)\nexport default class TransitionHandler extends Component {\n\trender() {\n\t\tconst { props } = this\n\t\tconst { children, injectPageProps = true } = props\n\n\t\treturn (\n\t\t\t<Consumer>\n\t\t\t\t{({\n\t\t\t\t\texitDelay,\n\t\t\t\t\texitLength,\n\t\t\t\t\texitState,\n\t\t\t\t\tentryDelay,\n\t\t\t\t\tentryLength,\n\t\t\t\t\tentryState,\n\t\t\t\t\tentryTrigger,\n\t\t\t\t\tentryProps,\n\t\t\t\t\texitTrigger,\n\t\t\t\t\texitProps,\n\t\t\t\t\tinTransition,\n\t\t\t\t\tupdateContext,\n\t\t\t\t\ttriggerResolve,\n\t\t\t\t\tappearAfter,\n\t\t\t\t\tpreventScrollJump,\n\t\t\t\t\thash,\n\t\t\t\t\te,\n\t\t\t\t}) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Location>\n\t\t\t\t\t\t\t{({ location }) => {\n\t\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\tpathname,\n\t\t\t\t\t\t\t\t\tkey: locationKey,\n\t\t\t\t\t\t\t\t} = location\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className=\"tl-edges\">\n\t\t\t\t\t\t\t\t\t\t<TransitionGroup component={null}>\n\t\t\t\t\t\t\t\t\t\t\t<DelayedTransition\n\t\t\t\t\t\t\t\t\t\t\t\tkey={pathname} // we're using seconds but transitiongroup uses ms\n\t\t\t\t\t\t\t\t\t\t\t\tdelay={getMs(entryDelay)}\n\t\t\t\t\t\t\t\t\t\t\t\ttimeout={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tenter: getMs(entryLength),\n\t\t\t\t\t\t\t\t\t\t\t\t\texit: getMs(exitLength),\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonEnter={node =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!node &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t!window.__tl_back_button_pressed &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tonEnter({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinTransition,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryTrigger,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryProps,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texitProps,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateContext,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerResolve,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreventScrollJump,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thash,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocationKey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappearAfter: getMs(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tappearAfter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonExit={node =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!node &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t!window.__tl_back_button_pressed &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tonExit({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinTransition,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texitTrigger,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryProps,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texitProps,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerResolve,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t\t{transitionStatus => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst mount =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionStatus ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'entering' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionStatus ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'entered'\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst states = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentry: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: entryState,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelay: entryDelay,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength: entryLength,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texit: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: exitState,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelay: exitDelay,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength: exitLength,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst current = mount\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? states.entry\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: states.exit\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst transitionState = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionStatus,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrent,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmount,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...states,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst exitZindex =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texitProps.zIndex || 0\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst entryZindex =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryProps.zIndex || 1\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TransitionRenderer\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmount={mount}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryZindex={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentryZindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texitZindex={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\texitZindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionStatus={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionStatus\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionState={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttransitionState\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchildren={children}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinjectPageProps={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinjectPageProps\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tappearAfter={getMs(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tappearAfter\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t</DelayedTransition>\n\t\t\t\t\t\t\t\t\t\t</TransitionGroup>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</Location>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Consumer>\n\t\t)\n\t}\n}\n"],"file":"TransitionHandler.js"}