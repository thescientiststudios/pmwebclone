{"version":3,"sources":["../../src/components/TransitionRenderer.js"],"names":["TransitionRenderer","Component","state","shouldBeVisible","props","appearAfter","componentDidMount","delay","appearafter","timeout","appearTimeout","setState","componentWillUnmount","shouldComponentUpdate","nextProps","nextState","transitionStatus","children","render","mount","entryZindex","exitZindex","transitionState","injectPageProps","zIndex","opacity"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEe,MAAMA,kBAAN,SAAiCC,gBAAjC,CAA2C;AAAA;AAAA;AAAA,SACzDC,KADyD,GACjD;AACPC,MAAAA,eAAe,EAAE,CAAC,CAAC,CAAC,KAAKC,KAAL,CAAWC;AADxB,KADiD;;AAAA,SAczDC,iBAdyD,GAcrC,MAAM;AACzB,YAAMC,KAAK,GACV,OAAO,KAAKH,KAAL,CAAWG,KAAlB,KAA4B,QAA5B,GAAuC,KAAKH,KAAL,CAAWG,KAAlD,GAA0D,CAD3D;AAEA,YAAMC,WAAW,GAChB,OAAO,KAAKJ,KAAL,CAAWC,WAAlB,KAAkC,QAAlC,GACG,KAAKD,KAAL,CAAWC,WADd,GAEG,CAHJ;AAIA,YAAMI,OAAO,GAAGF,KAAK,GAAGC,WAAxB;AAEA,WAAKE,aAAL,GAAqB,4CACpB,MAAM,KAAKC,QAAL,CAAc;AAAER,QAAAA,eAAe,EAAE;AAAnB,OAAd,CADc,EAEpBM,OAFoB,CAArB;AAIA,KA3BwD;;AAAA,SA6BzDG,oBA7ByD,GA6BlC,MAAM;AAC5B,oDAAa,KAAKF,aAAlB;AACA,KA/BwD;AAAA;;AAKzDG,EAAAA,qBAAqB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AAC3C;AACA,WACC,KAAKX,KAAL,CAAWY,gBAAX,KAAgCF,SAAS,CAACE,gBAA1C,IACA,KAAKd,KAAL,CAAWC,eAAX,KAA+BY,SAAS,CAACZ,eADzC,IAEA,KAAKC,KAAL,CAAWa,QAAX,KAAwBH,SAAS,CAACG,QAHnC;AAKA;;AAqBDC,EAAAA,MAAM,GAAG;AACR,UAAM;AACLC,MAAAA,KADK;AAELC,MAAAA,WAFK;AAGLC,MAAAA,UAHK;AAILL,MAAAA,gBAJK;AAKLM,MAAAA,eALK;AAMLL,MAAAA,QANK;AAOLM,MAAAA;AAPK,QAQF,KAAKnB,KART;AAUA,wBACC;AACC,MAAA,SAAS,EAAG,cACXe,KAAK,GAAG,mBAAH,GAAyB,qBAC9B,uBAAsBH,gBAAiB,EAHzC;AAIC,MAAA,KAAK,EAAE;AACNQ,QAAAA,MAAM,EAAEL,KAAK,GAAGC,WAAH,GAAiBC,UADxB;AAENI,QAAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWC,eAAX,GAA6B,CAA7B,GAAiC;AAFpC,OAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQC,6BAAC,uCAAD;AAAgB,MAAA,KAAK,EAAE,EAAE,GAAGmB;AAAL,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE;AACDC,IAAAA,eAAe,gBACZ,yBAAaN,QAAb,EAAuB,EACvB,GAAGK;AADoB,KAAvB,CADY,GAIZL,QAPJ,CARD,CADD;AAoBA;;AAhEwD","sourcesContent":["import React, { Component, cloneElement } from 'react'\nimport { setTimeout, clearTimeout } from 'requestanimationframe-timer'\nimport { PublicProvider } from '../context/createTransitionContext'\n\nexport default class TransitionRenderer extends Component {\n\tstate = {\n\t\tshouldBeVisible: !!!this.props.appearAfter,\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\t// only rerender if the transition status changes.\n\t\treturn (\n\t\t\tthis.props.transitionStatus !== nextProps.transitionStatus ||\n\t\t\tthis.state.shouldBeVisible !== nextState.shouldBeVisible ||\n\t\t\tthis.props.children !== nextProps.children\n\t\t)\n\t}\n\n\tcomponentDidMount = () => {\n\t\tconst delay =\n\t\t\ttypeof this.props.delay === 'number' ? this.props.delay : 0\n\t\tconst appearafter =\n\t\t\ttypeof this.props.appearAfter === 'number'\n\t\t\t\t? this.props.appearAfter\n\t\t\t\t: 0\n\t\tconst timeout = delay + appearafter\n\n\t\tthis.appearTimeout = setTimeout(\n\t\t\t() => this.setState({ shouldBeVisible: true }),\n\t\t\ttimeout\n\t\t)\n\t}\n\n\tcomponentWillUnmount = () => {\n\t\tclearTimeout(this.appearTimeout)\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tmount,\n\t\t\tentryZindex,\n\t\t\texitZindex,\n\t\t\ttransitionStatus,\n\t\t\ttransitionState,\n\t\t\tchildren,\n\t\t\tinjectPageProps,\n\t\t} = this.props\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`tl-wrapper ${\n\t\t\t\t\tmount ? 'tl-wrapper--mount' : 'tl-wrapper--unmount'\n\t\t\t\t} tl-wrapper-status--${transitionStatus}`}\n\t\t\t\tstyle={{\n\t\t\t\t\tzIndex: mount ? entryZindex : exitZindex,\n\t\t\t\t\topacity: this.state.shouldBeVisible ? 1 : 0,\n\t\t\t\t}}>\n\t\t\t\t<PublicProvider value={{ ...transitionState }}>\n\t\t\t\t\t{/* pass transition state to page/template */}\n\t\t\t\t\t{// injectPageProps is a plugin option\n\t\t\t\t\tinjectPageProps\n\t\t\t\t\t\t? cloneElement(children, {\n\t\t\t\t\t\t\t\t...transitionState,\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: children}\n\t\t\t\t</PublicProvider>\n\t\t\t</div>\n\t\t)\n\t}\n}\n"],"file":"TransitionRenderer.js"}